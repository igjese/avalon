<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" >
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" >
        
        <title>Avalon Sigma</title>
    </head>
    <body>

        <nav class="navbar navbar-expand-sm navbar-light bg-light py-0 mb-2 justify-content-between">
            <a class="navbar-brand" href="/game/"><em class="fa fa-jedi"></em> Avalon Sigma 0.1</a>
            <ul class="navbar-nav">
                <li class="nav-item">
                    <a class="nav-link" href="/game/restart/">Restart</a>
                </li>
            </ul>
        </nav>

        <div class="container m-3">



            <table class="table">
                <thead>
                    <tr>
                    <th scope="col">Resource</th>
                    <th scope="col">Quantity</th>
                    </tr>
                </thead>
                <tbody>
                    {% for resource in resources %}
                    <tr>
                        <td id="{{ resource.name }}_name">{{ resource.name }}</td>
                        <td id="{{ resource.name }}_quantity">{{ resource.quantity }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>





        </div> <!-- container -->

<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    // Set an interval to advance the game tick and update game state
    setInterval(function() {
        $.ajax({
            url: '/game/advance_game_tick_and_get_game_state/',  // Replace with the actual URL if different
            type: 'GET',
            success: function(response) {
                updateGameState(response);
            },
            error: function() {
                console.log('Error occurred');
            }
        });
    }, 10000);  // 10,000 milliseconds = 10 seconds 

    // Function to update the game state
    function updateGameState(gameState) {
        // Update just the resources table cells directly
        var resources = gameState.resources;
        $.each(resources, function(name, quantity) {
            $("#" + name + "_quantity").text(quantity);
        });
    }
</script>


</body>
</html>

    </body>
</html>